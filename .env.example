# =============================================================================
# ISP OPERATIONS PLATFORM - Environment Configuration
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control
# =============================================================================

# =============================================================================
# PLATFORM CONFIGURATION
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
PLATFORM_NAME=DotMac ISP Platform
PLATFORM_DOMAIN=localhost
PLATFORM_URL=http://localhost:8000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL - Main Database
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=dotmac
POSTGRES_USER=dotmac_user
POSTGRES_PASSWORD=change-me-in-production
POSTGRES_MAX_CONNECTIONS=100
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# Database Development Options
# Set to 'true' to skip database initialization if schema already exists (suppresses index warnings)
SKIP_DB_INIT_IF_EXISTS=false

# TimescaleDB - Time-Series Metrics
TIMESCALE_HOST=timescaledb
TIMESCALE_PORT=5432
TIMESCALE_DB=metrics
TIMESCALE_USER=timescale_user
TIMESCALE_PASSWORD=changeme_timescale_password

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change-me-in-production
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# JWT/AUTHENTICATION CONFIGURATION
# =============================================================================
JWT_SECRET=your-secret-key-here-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# =============================================================================
# TENANT CONFIGURATION
# =============================================================================
# Options: "single" or "multi"
TENANT_MODE=multi

# Default tenant ID (used in single-tenant mode, or as fallback in multi-tenant)
DEFAULT_TENANT_ID=default

# Whether to require tenant identification in multi-tenant mode
REQUIRE_TENANT_HEADER=true

# Header name for tenant ID (defaults to X-Tenant-ID)
TENANT_HEADER_NAME=X-Tenant-ID

# Query parameter for tenant ID (defaults to tenant_id)
TENANT_QUERY_PARAM=tenant_id

# Advanced tenant features (usually false for security)
ENABLE_TENANT_SWITCHING=false
ENABLE_CROSS_TENANT_QUERIES=false

# Multi-Tenant Limits
DEFAULT_TENANT_PLAN=basic
MAX_SUBSCRIBERS_PER_TENANT=1000
TENANT_ISOLATION_MODE=strict

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_VERSION=v1
API_PREFIX=/api/v1
API_TITLE=ISP Operations Platform API
MAX_UPLOAD_SIZE_MB=100

# CORS
CORS_ORIGINS=["http://localhost:3000", "http://localhost:3001"]

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# VAULT/SECRETS MANAGEMENT
# =============================================================================
# Vault is OPTIONAL in development. If not configured, system uses .env values
# To enable Vault: 1) Start vault container, 2) Set VAULT__ENABLED=true
VAULT__ENABLED=false
VAULT_URL=http://openbao:8200
VAULT_TOKEN=root
VAULT_MOUNT_POINT=secret
VAULT_NAMESPACE=dotmac

# =============================================================================
# OBJECT STORAGE (MinIO)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change-me-in-production
MINIO_ENDPOINT=minio:9000
MINIO_BUCKET_NAME=isp-platform
MINIO_USE_SSL=false

# =============================================================================
# RADIUS CONFIGURATION
# =============================================================================
# FreeRADIUS Database Connection
RADIUS_DB_TYPE=postgresql
RADIUS_DB_HOST=${POSTGRES_HOST}
RADIUS_DB_PORT=${POSTGRES_PORT}
RADIUS_DB_NAME=${POSTGRES_DB}
RADIUS_DB_USER=${POSTGRES_USER}
RADIUS_DB_PASSWORD=${POSTGRES_PASSWORD}

# RADIUS Server Settings
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813
RADIUS_STATUS_PORT=18120
RADIUS_SECRET=changeme_radius_shared_secret

# =============================================================================
# NETBOX CONFIGURATION (IPAM/DCIM)
# =============================================================================
NETBOX_DB_NAME=netbox
NETBOX_SECRET_KEY=changeme_secret_key_50chars_long_minimum_required_here
NETBOX_ADMIN_USER=admin
NETBOX_ADMIN_EMAIL=admin@example.com
NETBOX_ADMIN_PASSWORD=admin
NETBOX_SKIP_SUPERUSER=false
NETBOX_ALLOWED_HOSTS=*

# =============================================================================
# MONGODB CONFIGURATION (for GenieACS)
# =============================================================================
MONGO_HOST=mongodb
MONGO_PORT=27017
MONGO_USER=admin
MONGO_PASSWORD=changeme_mongo_password
MONGO_DATABASE=genieacs
MONGO_AUTH_SOURCE=admin

# =============================================================================
# GENIEACS CONFIGURATION (TR-069 ACS)
# =============================================================================
GENIEACS_CWMP_PORT=7547
GENIEACS_NBI_PORT=7557
GENIEACS_UI_PORT=7567
GENIEACS_FS_PORT=7577
GENIEACS_MONGODB_CONNECTION_URL=mongodb://${MONGO_USER}:${MONGO_PASSWORD}@${MONGO_HOST}:${MONGO_PORT}/${MONGO_DATABASE}?authSource=${MONGO_AUTH_SOURCE}

# =============================================================================
# WIREGUARD VPN CONFIGURATION
# =============================================================================
WG_SERVER_URL=auto
WG_SERVER_PORT=51820
WG_PEERS=10
WG_INTERNAL_SUBNET=10.200.0.0/16
WG_ALLOWED_IPS=0.0.0.0/0

# =============================================================================
# LIBRENMS CONFIGURATION
# =============================================================================
LIBRENMS_DB_NAME=librenms
LIBRENMS_SNMP_COMMUNITY=public
LIBRENMS_ADMIN_USER=admin
LIBRENMS_ADMIN_PASSWORD=admin

# =============================================================================
# ANSIBLE AWX CONFIGURATION
# =============================================================================
AWX_DB_NAME=awx
AWX_ADMIN_USER=admin
AWX_ADMIN_PASSWORD=changeme_awx_admin
AWX_SECRET_KEY=changeme_awx_secret_key_here

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_PASSWORD=admin
GRAFANA_PORT=3000

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=30d

# Alertmanager
ALERTMANAGER_PORT=9093

# SMTP for Alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM=alerts@isp-platform.com

# Jaeger (Distributed Tracing)
JAEGER_UI_PORT=16686
JAEGER_COLLECTOR_PORT=14268
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318

# Loki (Log Aggregation)
LOKI_PORT=3100

# OpenTelemetry Configuration
OTEL_ENABLED=false
OTEL_ENDPOINT=http://jaeger:4318
OTEL_SERVICE_NAME=dotmac-platform

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
# Docker Network
DOCKER_NETWORK_NAME=dotmac-network
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# IP Pool Configuration
DEFAULT_IP_POOL_START=10.100.0.1
DEFAULT_IP_POOL_END=10.100.255.254
DEFAULT_IP_POOL_SUBNET=10.100.0.0/16

# =============================================================================
# FTTH CONFIGURATION
# =============================================================================
# OLT Default Settings
DEFAULT_OLT_VENDOR=huawei
DEFAULT_OLT_SNMP_VERSION=v2c
DEFAULT_OLT_SNMP_COMMUNITY=public

# ONU Provisioning
ONU_AUTO_DISCOVERY=true
ONU_AUTO_PROVISION=false

# =============================================================================
# WIRELESS CONFIGURATION
# =============================================================================
DEFAULT_WIRELESS_FREQUENCY=5GHz
DEFAULT_WIRELESS_CHANNEL_WIDTH=40

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_FTTH_ENABLED=true
FEATURE_WIRELESS_ENABLED=true
FEATURE_ROUTER_MANAGEMENT_ENABLED=true
FEATURE_VPN_MANAGEMENT_ENABLED=true
FEATURE_MAPS_ENABLED=true
FEATURE_MOBILE_APP_ENABLED=false

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================
# Email
EMAIL_ENABLED=true
EMAIL_HOST=${SMTP_HOST}
EMAIL_PORT=${SMTP_PORT}
EMAIL_USERNAME=${SMTP_USERNAME}
EMAIL_PASSWORD=${SMTP_PASSWORD}
EMAIL_FROM=${SMTP_FROM}
EMAIL_USE_TLS=true

# SMS (Twilio)
SMS_ENABLED=false
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_FROM_NUMBER=+1234567890

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=isp-platform-backups

# =============================================================================
# COMPLIANCE & SECURITY
# =============================================================================
# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_YEARS=7

# GDPR
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555

# Security
FORCE_HTTPS=false
SECURE_COOKIES=false
HSTS_ENABLED=false

# =============================================================================
# NOTES
# =============================================================================
# 1. Change ALL default passwords before production deployment
# 2. Generate secure secrets using: openssl rand -hex 32
# 3. Store sensitive credentials in HashiCorp Vault in production
# 4. Enable HTTPS and secure cookies in production
# 5. Configure proper SMTP/email settings for alerts
# 6. Review and adjust rate limits based on your needs
# 7. Configure CORS origins for your frontend domains
# 8. Set TENANT_MODE=multi for ISP multi-tenant operations