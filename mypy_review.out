src/dotmac/platform/project_management/jinja_utils.py: note: In function "render_with_fallback":
src/dotmac/platform/project_management/jinja_utils.py:146:64: error: Argument
"default" to "render_template" has incompatible type "None"; expected "str" 
[arg-type]
        result = render_template(template_string, context, default=None)
                                                                   ^~~~
src/dotmac/platform/geo/routing_service.py: note: In member "get_route" of class "RoutingService":
src/dotmac/platform/geo/routing_service.py:91:49: error: Argument "timeout" to
"get" of "ClientSession" has incompatible type "int"; expected
"ClientTimeout | _SENTINEL | None"  [arg-type]
                        url, params=params, timeout=15
                                                    ^~
src/dotmac/platform/geo/routing_service.py:118:29: error: Incompatible types in
assignment (expression has type "list[Never]", variable has type "bool") 
[assignment]
                        steps = []
                                ^~
src/dotmac/platform/geo/routing_service.py:122:33: error: "bool" has no
attribute "append"  [attr-defined]
                                    steps.append({
                                    ^~~~~~~~~~~~
src/dotmac/platform/geo/routing_service.py: note: In member "get_distance_matrix" of class "RoutingService":
src/dotmac/platform/geo/routing_service.py:276:68: error: Argument "timeout" to
"get" of "ClientSession" has incompatible type "int"; expected
"ClientTimeout | _SENTINEL | None"  [arg-type]
    ...   async with session.get(url, params=params, timeout=15) as response:
                                                             ^~
src/dotmac/platform/geo/geocoding_service.py: note: In member "set" of class "GeocodingCache":
src/dotmac/platform/geo/geocoding_service.py:49:5: error: Function is missing a
return type annotation  [no-untyped-def]
        def set(self, address: str, result: Dict):
        ^
src/dotmac/platform/geo/geocoding_service.py: note: In member "geocode" of class "GeocodingService":
src/dotmac/platform/geo/geocoding_service.py:153:70: error: Argument "timeout"
to "get" of "ClientSession" has incompatible type "int"; expected
"ClientTimeout | _SENTINEL | None"  [arg-type]
    ... async with session.get(url, headers=headers, timeout=10) as response:
                                                             ^~
src/dotmac/platform/geo/geocoding_service.py: note: In member "reverse_geocode" of class "GeocodingService":
src/dotmac/platform/geo/geocoding_service.py:225:70: error: Argument "timeout"
to "get" of "ClientSession" has incompatible type "int"; expected
"ClientTimeout | _SENTINEL | None"  [arg-type]
    ... async with session.get(url, headers=headers, timeout=10) as response:
                                                             ^~
src/dotmac/platform/geo/geocoding_service.py: note: In member "geocode_with_fallback" of class "GeocodingService":
src/dotmac/platform/geo/geocoding_service.py:302:39: error: Argument 1 to
"join" of "str" has incompatible type "list[str | None]"; expected
"Iterable[str]"  [arg-type]
                attempts.append(", ".join(full_parts))
                                          ^~~~~~~~~~
src/dotmac/platform/geo/geocoding_service.py:309:39: error: Argument 1 to
"join" of "str" has incompatible type "list[str | None]"; expected
"Iterable[str]"  [arg-type]
                attempts.append(", ".join(fallback_parts))
                                          ^~~~~~~~~~~~~~
src/dotmac/platform/geo/geocoding_service.py:316:39: error: Argument 1 to
"join" of "str" has incompatible type "list[str | None]"; expected
"Iterable[str]"  [arg-type]
                attempts.append(", ".join(city_parts))
                                          ^~~~~~~~~~
src/dotmac/platform/geo/auto_geocode.py: note: In function "geocode_customer_address":
src/dotmac/platform/geo/auto_geocode.py:73:16: error: Argument 1 to "len" has
incompatible type "Any | None"; expected "Sized"  [arg-type]
            if len(country) == 2:
                   ^~~~~~~
src/dotmac/platform/project_management/time_tracking_models.py: note: In class "TimeEntry":
src/dotmac/platform/project_management/time_tracking_models.py:96:18: error:
Need type annotation for "entry_type"  [var-annotated]
        entry_type = Column(
                     ^
src/dotmac/platform/project_management/time_tracking_models.py:102:14: error:
Need type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/time_tracking_models.py: note: In member "get_rate_for_datetime" of class "LaborRate":
src/dotmac/platform/project_management/time_tracking_models.py:255:20: error:
Incompatible return value type (got "Column[Decimal]", expected "Decimal") 
[return-value]
                return self.weekend_rate
                       ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_tracking_models.py:261:24: error:
Incompatible return value type (got "Column[Decimal]", expected "Decimal") 
[return-value]
                    return self.night_rate
                           ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_tracking_models.py:265:16: error:
Incompatible return value type (got "Column[Decimal]", expected "Decimal") 
[return-value]
            return self.regular_rate
                   ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_tracking_models.py: note: In class "TimesheetPeriod":
src/dotmac/platform/project_management/time_tracking_models.py:306:31: error:
Name "Integer" is not defined  [name-defined]
        technician_count = Column(Integer, nullable=True)
                                  ^~~~~~~
src/dotmac/platform/project_management/time_tracking_models.py:307:26: error:
Name "Integer" is not defined  [name-defined]
        entry_count = Column(Integer, nullable=True)
                             ^~~~~~~
src/dotmac/platform/project_management/template_models.py: note: In class "ProjectTemplate":
src/dotmac/platform/project_management/template_models.py:78:30: error: Need
type annotation for "applies_to_order_types"  [var-annotated]
        applies_to_order_types = Column(ArrayCompat(String(50)), nullable=...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/template_models.py:79:32: error: Need
type annotation for "applies_to_service_types"  [var-annotated]
        applies_to_service_types = Column(ArrayCompat(String(50)), nullabl...
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/template_models.py:82:12: error: Need
type annotation for "tags"  [var-annotated]
        tags = Column(ArrayCompat(String(50)), nullable=True)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_models.py: note: In class "TaskTemplate":
src/dotmac/platform/project_management/template_models.py:140:34: error: Need
type annotation for "depends_on_sequence_orders"  [var-annotated]
        depends_on_sequence_orders = Column(ArrayCompat(Integer), nullable...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/template_models.py:149:26: error: Need
type annotation for "required_equipment"  [var-annotated]
        required_equipment = Column(ArrayCompat(String(100)), nullable=Tru...
                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_models.py:150:31: error: Need
type annotation for "required_certifications"  [var-annotated]
        required_certifications = Column(ArrayCompat(String(100)), nullabl...
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/template_models.py:158:12: error: Need
type annotation for "tags"  [var-annotated]
        tags = Column(ArrayCompat(String(50)), nullable=True)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/resource_models.py: note: In class "Equipment":
src/dotmac/platform/project_management/resource_models.py:90:14: error: Need
type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/resource_models.py: note: In member "is_available" of class "Equipment":
src/dotmac/platform/project_management/resource_models.py:159:13: error:
Incompatible return value type (got "ColumnElement[bool] | bool", expected
"bool")  [return-value]
                self.is_active
                ^
src/dotmac/platform/project_management/resource_models.py: note: In member "needs_maintenance" of class "Equipment":
src/dotmac/platform/project_management/resource_models.py:168:16: error:
Incompatible return value type (got "ColumnElement[bool]", expected "bool") 
[return-value]
            return date.today() >= self.next_maintenance_due
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/resource_models.py: note: In member "needs_calibration" of class "Equipment":
src/dotmac/platform/project_management/resource_models.py:174:16: error:
Incompatible return value type (got "ColumnElement[bool]", expected "bool") 
[return-value]
            return date.today() >= self.next_calibration_due
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/resource_models.py: note: In class "Vehicle":
src/dotmac/platform/project_management/resource_models.py:204:14: error: Need
type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/resource_models.py: note: In member "is_available" of class "Vehicle":
src/dotmac/platform/project_management/resource_models.py:283:13: error:
Incompatible return value type (got "ColumnElement[bool] | bool", expected
"bool")  [return-value]
                self.is_active
                ^
src/dotmac/platform/project_management/resource_models.py: note: In class "ResourceAssignment":
src/dotmac/platform/project_management/resource_models.py:357:14: error: Need
type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/resource_models.py: note: In member "is_overdue" of class "ResourceAssignment":
src/dotmac/platform/project_management/resource_models.py:410:16: error:
Incompatible return value type (got "ColumnElement[bool]", expected "bool") 
[return-value]
            return datetime.now() > self.expected_return_at
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py: note: In class "Project":
src/dotmac/platform/project_management/models.py:145:20: error: Need type
annotation for "project_type"  [var-annotated]
        project_type = Column(SQLEnum(ProjectType), nullable=False, index=...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/models.py:146:14: error: Need type
annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/models.py:152:16: error: Need type
annotation for "priority"  [var-annotated]
        priority = Column(
                   ^
src/dotmac/platform/project_management/models.py:214:12: error: Need type
annotation for "tags"  [var-annotated]
        tags = Column(ArrayCompat(String(50)), nullable=True)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py: note: In class "Task":
src/dotmac/platform/project_management/models.py:275:17: error: Need type
annotation for "task_type"  [var-annotated]
        task_type = Column(SQLEnum(TaskType), nullable=False, index=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py:276:14: error: Need type
annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/models.py:279:16: error: Need type
annotation for "priority"  [var-annotated]
        priority = Column(
                   ^
src/dotmac/platform/project_management/models.py:291:24: error: Need type
annotation for "depends_on_tasks"  [var-annotated]
        depends_on_tasks = Column(
                           ^
src/dotmac/platform/project_management/models.py:330:26: error: Need type
annotation for "required_equipment"  [var-annotated]
        required_equipment = Column(
                             ^
src/dotmac/platform/project_management/models.py:333:31: error: Need type
annotation for "required_certifications"  [var-annotated]
        required_certifications = Column(
                                  ^
src/dotmac/platform/project_management/models.py:356:12: error: Need type
annotation for "tags"  [var-annotated]
        tags = Column(ArrayCompat(String(50)), nullable=True)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py: note: In class "Team":
src/dotmac/platform/project_management/models.py:410:17: error: Need type
annotation for "team_type"  [var-annotated]
        team_type = Column(SQLEnum(TeamType), nullable=False, index=True)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py:416:21: error: Need type
annotation for "service_areas"  [var-annotated]
        service_areas = Column(
                        ^
src/dotmac/platform/project_management/models.py:429:20: error: Need type
annotation for "working_days"  [var-annotated]
        working_days = Column(
                       ^
src/dotmac/platform/project_management/models.py:437:23: error: Need type
annotation for "specializations"  [var-annotated]
        specializations = Column(
                          ^
src/dotmac/platform/project_management/models.py:459:12: error: Need type
annotation for "tags"  [var-annotated]
        tags = Column(ArrayCompat(String(50)), nullable=True)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/models.py: note: In class "TechnicianTeamMembership":
src/dotmac/platform/project_management/models.py:523:12: error: Need type
annotation for "role"  [var-annotated]
        role = Column(SQLEnum(TeamRole), nullable=False, default=TeamRole....
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/field_service/models.py: note: In class "Technician":
src/dotmac/platform/field_service/models.py:77:14: error: Need type annotation
for "status"  [var-annotated]
        status = Column(SQLEnum(TechnicianStatus), nullable=False, default...
                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/field_service/models.py:78:19: error: Need type annotation
for "skill_level"  [var-annotated]
        skill_level = Column(SQLEnum(TechnicianSkillLevel), nullable=False...
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/field_service/models.py:89:21: error: Need type annotation
for "service_areas"  [var-annotated]
        service_areas = Column(ArrayCompat(String(100)), nullable=True)  #...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/models.py:94:20: error: Need type annotation
for "working_days"  [var-annotated]
        working_days = Column(ArrayCompat(Integer), nullable=True)  # 0=Mo...
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/models.py: note: In member "is_available_now" of class "Technician":
src/dotmac/platform/field_service/models.py:138:16: error: Incompatible return
value type (got "ColumnElement[bool]", expected "bool")  [return-value]
            return self.status == TechnicianStatus.AVAILABLE and self.is_a...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/templates.py: note: In member "__init__" of class "TaskTemplate":
src/dotmac/platform/project_management/templates.py:26:44: error: Incompatible
default for argument "required_skills" (default has type "None", argument has
type "dict[str, bool]")  [assignment]
            required_skills: Dict[str, bool] = None,
                                               ^~~~
src/dotmac/platform/project_management/templates.py:26:44: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:26:44: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py:27:41: error: Incompatible
default for argument "required_equipment" (default has type "None", argument has
type "list[str]")  [assignment]
            required_equipment: List[str] = None,
                                            ^~~~
src/dotmac/platform/project_management/templates.py:27:41: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:27:41: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py:28:46: error: Incompatible
default for argument "required_certifications" (default has type "None",
argument has type "list[str]")  [assignment]
            required_certifications: List[str] = None,
                                                 ^~~~
src/dotmac/platform/project_management/templates.py:28:46: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:28:46: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py:31:44: error: Incompatible
default for argument "depends_on_task_order" (default has type "None", argument
has type "list[int]")  [assignment]
            depends_on_task_order: List[int] = None,
                                               ^~~~
src/dotmac/platform/project_management/templates.py:31:44: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:31:44: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py: note: In member "__init__" of class "ProjectTemplate":
src/dotmac/platform/project_management/templates.py:56:35: error: Incompatible
default for argument "required_team_type" (default has type "None", argument has
type "str")  [assignment]
            required_team_type: str = None,
                                      ^~~~
src/dotmac/platform/project_management/templates.py:56:35: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:56:35: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py: note: In function "get_template_for_order":
src/dotmac/platform/project_management/templates.py:344:65: error: Incompatible
default for argument "service_type" (default has type "None", argument has type
"str")  [assignment]
    ...e_for_order(order_type: str, service_type: str = None) -> ProjectTempl...
                                                        ^~~~
src/dotmac/platform/project_management/templates.py:344:65: note: PEP 484 prohibits implicit Optional. Accordingly, mypy has changed its default to no_implicit_optional=True
src/dotmac/platform/project_management/templates.py:344:65: note: Use https://github.com/hauntsaninja/no_implicit_optional to automatically upgrade your codebase
src/dotmac/platform/project_management/templates.py:358:20: error: Incompatible
return value type (got "ProjectTemplate | None", expected "ProjectTemplate") 
[return-value]
                return PROJECT_TEMPLATES.get("fiber_installation")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/templates.py:360:20: error: Incompatible
return value type (got "ProjectTemplate | None", expected "ProjectTemplate") 
[return-value]
                return PROJECT_TEMPLATES.get("wireless_installation")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/templates.py:365:16: error: Incompatible
return value type (got "ProjectTemplate | None", expected "ProjectTemplate") 
[return-value]
            return PROJECT_TEMPLATES.get("fiber_installation")
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/templates.py:367:12: error: Incompatible
return value type (got "None", expected "ProjectTemplate")  [return-value]
        return None
               ^~~~
src/dotmac/platform/project_management/template_service.py: note: In member "create_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:101:46: error:
Argument 1 to "_create_task_template" of "TemplateBuilderService" has
incompatible type "Column[UUID]"; expected "UUID"  [arg-type]
                await self._create_task_template(template.id, task_data, c...
                                                 ^~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py: note: In member "update_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:239:31: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
            template.updated_by = updated_by
                                  ^~~~~~~~~~
src/dotmac/platform/project_management/template_service.py:240:31: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
            template.updated_at = datetime.now(UTC)
                                  ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py: note: In member "delete_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:261:31: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
            template.deleted_at = datetime.now(UTC)
                                  ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py: note: In member "update_task_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:431:27: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
            task.updated_by = updated_by
                              ^~~~~~~~~~
src/dotmac/platform/project_management/template_service.py:432:27: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
            task.updated_at = datetime.now(UTC)
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py: note: In member "delete_task_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:461:27: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
            task.deleted_at = datetime.now(UTC)
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py: note: In member "preview_template" of class "TemplateBuilderService":
src/dotmac/platform/project_management/template_service.py:499:13: error:
Argument 1 to "render_template" has incompatible type "Column[str]"; expected
"str | None"  [arg-type]
                template.project_name_pattern,
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py:501:21: error:
Argument "default" to "render_template" has incompatible type
"Column[str] | str"; expected "str"  [arg-type]
                default=template.project_name_pattern or "Untitled Project...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py:505:13: error:
Argument 1 to "render_template" has incompatible type "Column[str]"; expected
"str | None"  [arg-type]
                template.project_description_pattern,
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_service.py:507:21: error:
Argument "default" to "render_template" has incompatible type
"Column[str] | str"; expected "str"  [arg-type]
                default=template.project_description_pattern or "",
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/schemas.py:436:1: error:
"type[ProjectWithTasks]" has no attribute "model_rebuild"  [attr-defined]
    ProjectWithTasks.model_rebuild()
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_models.py: note: In class "TechnicianSchedule":
src/dotmac/platform/project_management/scheduling_models.py:92:14: error: Need
type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/scheduling_models.py: note: In class "TaskAssignment":
src/dotmac/platform/project_management/scheduling_models.py:180:14: error: Need
type annotation for "status"  [var-annotated]
        status = Column(
                 ^
src/dotmac/platform/project_management/scheduling_models.py: note: In member "is_overdue" of class "TaskAssignment":
src/dotmac/platform/project_management/scheduling_models.py:235:16: error:
Incompatible return value type (got "ColumnElement[bool]", expected "bool") 
[return-value]
            return datetime.now() > self.scheduled_end
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_models.py: note: In member "is_full" of class "AvailabilityWindow":
src/dotmac/platform/project_management/scheduling_models.py:307:16: error:
Incompatible return value type (got "ColumnElement[bool]", expected "bool") 
[return-value]
            return self.booked_appointments >= self.max_appointments
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_models.py: note: In member "remaining_capacity" of class "AvailabilityWindow":
src/dotmac/platform/project_management/scheduling_models.py:312:16: error:
Incompatible return value type (got
"SupportsDunderLT[Any] | SupportsDunderGT[Any]", expected "int")  [return-value]
            return max(0, self.max_appointments - self.booked_appointments...
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py: note: In member "check_geofence" of class "GeofencingService":
src/dotmac/platform/field_service/geofencing_service.py:143:43: error: Argument
3 to "calculate_distance" of "GeofencingService" has incompatible type
"float | None"; expected "float"  [arg-type]
                    current_lat, current_lng, job.location_lat, job.locati...
                                              ^~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py:143:61: error: Argument
4 to "calculate_distance" of "GeofencingService" has incompatible type
"float | None"; expected "float"  [arg-type]
    ...          current_lat, current_lng, job.location_lat, job.location_lng
                                                             ^~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py:151:32: error: Argument
2 to "_get_previous_geofence_state" of "GeofencingService" has incompatible type
"str"; expected "UUID"  [arg-type]
                    technician_id, job.id
                                   ^~~~~~
src/dotmac/platform/field_service/geofencing_service.py:163:28: error: Argument
"job_id" to "GeofenceEvent" has incompatible type "str"; expected "UUID" 
[arg-type]
                        job_id=job.id,
                               ^~~~~~
src/dotmac/platform/field_service/geofencing_service.py:177:28: error: Argument
"job_id" to "GeofenceEvent" has incompatible type "str"; expected "UUID" 
[arg-type]
                        job_id=job.id,
                               ^~~~~~
src/dotmac/platform/field_service/geofencing_service.py: note: In member "_get_previous_geofence_state" of class "GeofencingService":
src/dotmac/platform/field_service/geofencing_service.py:231:13: error: Argument
1 to "calculate_distance" of "GeofencingService" has incompatible type
"Column[float]"; expected "float"  [arg-type]
                previous_location.latitude,
                ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py:232:13: error: Argument
2 to "calculate_distance" of "GeofencingService" has incompatible type
"Column[float]"; expected "float"  [arg-type]
                previous_location.longitude,
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py: note: In member "get_nearby_jobs" of class "GeofencingService":
src/dotmac/platform/field_service/geofencing_service.py:347:43: error: Argument
3 to "calculate_distance" of "GeofencingService" has incompatible type
"float | None"; expected "float"  [arg-type]
                    current_lat, current_lng, job.location_lat, job.locati...
                                              ^~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/geofencing_service.py:347:61: error: Argument
4 to "calculate_distance" of "GeofencingService" has incompatible type
"float | None"; expected "float"  [arg-type]
    ...          current_lat, current_lng, job.location_lat, job.location_lng
                                                             ^~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py: note: In member "find_best_technician" of class "TechnicianAssignmentService":
src/dotmac/platform/field_service/assignment_service.py:118:31: error: Argument
"key" to "sort" of "list" has incompatible type
"Callable[[dict[str, object]], object]"; expected
"Callable[[dict[str, object]], SupportsDunderLT[Any] | SupportsDunderGT[Any]]" 
[arg-type]
            scored_techs.sort(key=lambda x: x["score"], reverse=True)
                                  ^
src/dotmac/platform/field_service/assignment_service.py: note: In function "find_best_technician":
src/dotmac/platform/field_service/assignment_service.py:118:41: error:
Incompatible return value type (got "object", expected
"SupportsDunderLT[Any] | SupportsDunderGT[Any]")  [return-value]
            scored_techs.sort(key=lambda x: x["score"], reverse=True)
                                            ^~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py: note: In member "find_best_technician" of class "TechnicianAssignmentService":
src/dotmac/platform/field_service/assignment_service.py:123:27: error: "object"
has no attribute "id"  [attr-defined]
                technician_id=best_match["technician"].id,
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:124:29: error: "object"
has no attribute "full_name"  [attr-defined]
                technician_name=best_match["technician"].full_name,
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:125:25: error: No
overload variant of "round" matches argument types "object", "int" 
[call-overload]
                distance_km=round(best_match["distance"], 2),
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:125:25: note: Possible overload variants:
src/dotmac/platform/field_service/assignment_service.py:125:25: note:     def [_T] round(number: _SupportsRound1[_T], ndigits: None = ...) -> _T
src/dotmac/platform/field_service/assignment_service.py:125:25: note:     def [_T] round(number: _SupportsRound2[_T], ndigits: SupportsIndex) -> _T
src/dotmac/platform/field_service/assignment_service.py:126:19: error: No
overload variant of "round" matches argument types "object", "int" 
[call-overload]
                score=round(best_match["score"], 2),
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:126:19: note: Possible overload variants:
src/dotmac/platform/field_service/assignment_service.py:126:19: note:     def [_T] round(number: _SupportsRound1[_T], ndigits: None = ...) -> _T
src/dotmac/platform/field_service/assignment_service.py:126:19: note:     def [_T] round(number: _SupportsRound2[_T], ndigits: SupportsIndex) -> _T
src/dotmac/platform/field_service/assignment_service.py:129:16: error:
Incompatible return value type (got "object", expected "Technician | None") 
[return-value]
            return best_match["technician"]
                   ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py: note: In member "assign_technician_to_job" of class "TechnicianAssignmentService":
src/dotmac/platform/field_service/assignment_service.py:164:42: error:
Incompatible types in assignment (expression has type "Column[UUID]", variable
has type "SQLCoreOperations[str | None] | str | None")  [assignment]
                job.assigned_technician_id = technician.id
                                             ^~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:177:37: error:
Incompatible types in assignment (expression has type "TechnicianStatus",
variable has type "Column[Any]")  [assignment]
                    technician.status = TechnicianStatus.ON_JOB
                                        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py: note: In member "_calculate_technician_score" of class "TechnicianAssignmentService":
src/dotmac/platform/field_service/assignment_service.py:339:13: error: Name
"TechnicianSkillLevel" is not defined  [name-defined]
                TechnicianSkillLevel.EXPERT: 50,
                ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:340:13: error: Name
"TechnicianSkillLevel" is not defined  [name-defined]
                TechnicianSkillLevel.SENIOR: 40,
                ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:341:13: error: Name
"TechnicianSkillLevel" is not defined  [name-defined]
                TechnicianSkillLevel.INTERMEDIATE: 30,
                ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:342:13: error: Name
"TechnicianSkillLevel" is not defined  [name-defined]
                TechnicianSkillLevel.JUNIOR: 20,
                ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:343:13: error: Name
"TechnicianSkillLevel" is not defined  [name-defined]
                TechnicianSkillLevel.TRAINEE: 10,
                ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:349:13: error:
Incompatible types in assignment (expression has type "ColumnElement[float]",
variable has type "float")  [assignment]
                score += tech.completion_rate * 25  # 0-100% = 0-25 points
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/assignment_service.py:352:13: error:
Incompatible types in assignment (expression has type "ColumnElement[float]",
variable has type "float")  [assignment]
                score += (tech.average_rating / 5.0) * 25  # 0-5 rating = ...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/assignment_service.py: note: In member "assign_ticket_automatically" of class "TicketAssignmentService":
src/dotmac/platform/ticketing/assignment_service.py:113:38: error: Incompatible
types in assignment (expression has type "object", variable has type
"SQLCoreOperations[UUID | None] | UUID | None")  [assignment]
            ticket.assigned_to_user_id = selected_agent_id
                                         ^~~~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/assignment_service.py:121:17: error: Incompatible
types in assignment (expression has type "AgentAvailability | None", variable
has type "AgentAvailability")  [assignment]
            agent = agent_result.scalar_one_or_none()
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/assignment_service.py:135:16: error: Incompatible
return value type (got "object", expected "UUID | None")  [return-value]
            return selected_agent_id
                   ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "create_project" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:90:44: error: Incompatible
types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
                        project.location_lat = coords["lat"]
                                               ^~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:91:44: error: Incompatible
types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
                        project.location_lng = coords["lon"]
                                               ^~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:92:51: error: Incompatible
types in assignment (expression has type "dict[str, float]", variable has type
"Column[Any]")  [assignment]
                        project.service_coordinates = coords
                                                      ^~~~~~
src/dotmac/platform/project_management/service.py: note: In member "update_project" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:205:30: error: Incompatible
types in assignment (expression has type "str | None", variable has type
"Column[str]")  [assignment]
            project.updated_by = updated_by
                                 ^~~~~~~~~~
src/dotmac/platform/project_management/service.py:206:30: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
            project.updated_at = datetime.now(UTC)
                                 ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "delete_project" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:221:30: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
            project.deleted_at = datetime.now(UTC)
                                 ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "create_task" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:276:41: error: Incompatible
types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
                        task.location_lat = coords["lat"]
                                            ^~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:277:41: error: Incompatible
types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
                        task.location_lng = coords["lon"]
                                            ^~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:288:9: error: Incompatible
types in assignment (expression has type "ColumnElement[int]", variable has type
"Column[int]")  [assignment]
            project.tasks_total += 1
            ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "update_task" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:381:27: error: Incompatible
types in assignment (expression has type "str | None", variable has type
"Column[str]")  [assignment]
            task.updated_by = updated_by
                              ^~~~~~~~~~
src/dotmac/platform/project_management/service.py:382:27: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
            task.updated_at = datetime.now(UTC)
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:387:44: error: Incompatible
types in assignment (expression has type "int", variable has type "Column[int]")
 [assignment]
                task.actual_duration_minutes = int(duration.total_seconds(...
                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/service.py:394:49: error: Argument 1 to
"_update_project_progress" of "ProjectManagementService" has incompatible type
"Column[UUID]"; expected "UUID"  [arg-type]
                await self._update_project_progress(task.project_id)
                                                    ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "delete_task" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:406:27: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
            task.deleted_at = datetime.now(UTC)
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:410:45: error: Argument 1 to
"_update_project_progress" of "ProjectManagementService" has incompatible type
"Column[UUID]"; expected "UUID"  [arg-type]
            await self._update_project_progress(task.project_id)
                                                ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "update_team" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:510:27: error: Incompatible
types in assignment (expression has type "str | None", variable has type
"Column[str]")  [assignment]
            team.updated_by = updated_by
                              ^~~~~~~~~~
src/dotmac/platform/project_management/service.py:511:27: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
            team.updated_at = datetime.now(UTC)
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py: note: In member "_update_project_progress" of class "ProjectManagementService":
src/dotmac/platform/project_management/service.py:574:35: error: Incompatible
types in assignment (expression has type "int", variable has type "Column[int]")
 [assignment]
                project.tasks_total = total_tasks
                                      ^~~~~~~~~~~
src/dotmac/platform/project_management/service.py:575:39: error: Incompatible
types in assignment (expression has type "int", variable has type "Column[int]")
 [assignment]
                project.tasks_completed = completed_tasks
                                          ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:576:42: error: Incompatible
types in assignment (expression has type "int", variable has type "Column[int]")
 [assignment]
                project.completion_percent = completion_percent
                                             ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:580:34: error: Incompatible
types in assignment (expression has type "ProjectStatus", variable has type
"Column[Any]")  [assignment]
                    project.status = ProjectStatus.COMPLETED
                                     ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/service.py:582:42: error: Incompatible
types in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
                        project.actual_end = datetime.now(UTC)
                                             ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In class "AssignmentScore":
src/dotmac/platform/project_management/assignment_algorithms.py:57:33: error:
Incompatible types in assignment (expression has type "None", variable has type
"list[str]")  [assignment]
        missing_skills: List[str] = None
                                    ^~~~
src/dotmac/platform/project_management/assignment_algorithms.py:58:41: error:
Incompatible types in assignment (expression has type "None", variable has type
"list[str]")  [assignment]
        missing_certifications: List[str] = None
                                            ^~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In member "_score_technician" of class "TaskAssignmentAlgorithm":
src/dotmac/platform/project_management/assignment_algorithms.py:233:27: error:
Argument "technician_id" to "AssignmentScore" has incompatible type
"Column[UUID]"; expected "UUID"  [arg-type]
                technician_id=technician.id,
                              ^~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In member "_score_skills" of class "TaskAssignmentAlgorithm":
src/dotmac/platform/project_management/assignment_algorithms.py:288:23: error:
Need type annotation for "tech_skills"  [var-annotated]
            tech_skills = technician.skills or {}
                          ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In member "_score_location" of class "TaskAssignmentAlgorithm":
src/dotmac/platform/project_management/assignment_algorithms.py:328:13: error:
Argument 1 to "_calculate_distance" of "TaskAssignmentAlgorithm" has
incompatible type "Column[float]"; expected "float"  [arg-type]
                technician.current_lat,
                ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py:329:13: error:
Argument 2 to "_calculate_distance" of "TaskAssignmentAlgorithm" has
incompatible type "Column[float]"; expected "float"  [arg-type]
                technician.current_lng,
                ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In member "_score_workload" of class "TaskAssignmentAlgorithm":
src/dotmac/platform/project_management/assignment_algorithms.py:437:15: error:
Function "datetime.datetime.date" is not valid as a type  [valid-type]
            date: datetime.date,
                  ^
src/dotmac/platform/project_management/assignment_algorithms.py:437:15: note: Perhaps you need "Callable[...]" or a callback protocol?
src/dotmac/platform/project_management/assignment_algorithms.py: note: In member "_score_certifications" of class "TaskAssignmentAlgorithm":
src/dotmac/platform/project_management/assignment_algorithms.py:488:22: error:
Need type annotation for "tech_certs"  [var-annotated]
            tech_certs = technician.certifications or []
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py:489:69: error:
Item "Column[Any]" of "Column[Any] | list[Any]" has no attribute "__iter__" (not
iterable)  [union-attr]
    ...ames = {cert.get("name", "").lower() for cert in tech_certs if isinsta...
                                                        ^~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py: note: In function "assign_task_automatically":
src/dotmac/platform/project_management/assignment_algorithms.py:574:40: error:
Incompatible types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
            assignment.task_location_lat = task_location[0]
                                           ^~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/assignment_algorithms.py:575:40: error:
Incompatible types in assignment (expression has type "float", variable has type
"Column[float]")  [assignment]
            assignment.task_location_lng = task_location[1]
                                           ^~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/channels/webhook.py: note: In member "_format_discord" of class "WebhookChannelProvider":
src/dotmac/platform/notifications/channels/webhook.py:334:13: error: "object"
has no attribute "append"  [attr-defined]
                embed["fields"].append({"name": "Product", "value": contex...
                ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/channels/webhook.py:336:13: error: "object"
has no attribute "append"  [attr-defined]
                embed["fields"].append(
                ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/network/ipv6_lifecycle_service.py: note: In member "activate_ipv6" of class "IPv6LifecycleService":
src/dotmac/platform/network/ipv6_lifecycle_service.py:251:40: error: "object"
has no attribute "update_ipv6_prefix"  [attr-defined]
                        coa_result = await self.coa_client.update_ipv6_pre...
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/network/ipv6_lifecycle_service.py:297:16: error:
Incompatible return value type (got "dict[str, datetime | str | None]", expected
"dict[str, object]")  [return-value]
            return result
                   ^~~~~~
src/dotmac/platform/network/ipv6_lifecycle_service.py:297:16: note: "dict" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance
src/dotmac/platform/network/ipv6_lifecycle_service.py:297:16: note: Consider using "Mapping" instead, which is covariant in the value type
src/dotmac/platform/network/ipv6_lifecycle_service.py:297:16: note: Perhaps you need a type annotation for "result"? Suggestion: "dict[str, object]"
src/dotmac/platform/network/ipv6_lifecycle_service.py: note: In member "revoke_ipv6" of class "IPv6LifecycleService":
src/dotmac/platform/network/ipv6_lifecycle_service.py:457:43: error: "object"
has no attribute "disconnect_session"  [attr-defined]
                    disconnect_result = await self.coa_client.disconnect_s...
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/network/ipv6_lifecycle_service.py:536:16: error:
Incompatible return value type (got "dict[str, datetime | str | None]", expected
"dict[str, object]")  [return-value]
            return result
                   ^~~~~~
src/dotmac/platform/network/ipv6_lifecycle_service.py:536:16: note: "dict" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance
src/dotmac/platform/network/ipv6_lifecycle_service.py:536:16: note: Consider using "Mapping" instead, which is covariant in the value type
src/dotmac/platform/network/ipv6_lifecycle_service.py:536:16: note: Perhaps you need a type annotation for "result"? Suggestion: "dict[str, object]"
src/dotmac/platform/billing/reports/generators.py: note: In member "get_aging_by_partner" of class "AgingReportGenerator":
src/dotmac/platform/billing/reports/generators.py:656:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.partner_id,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:714:19: error: Name
"Customer" is not defined  [name-defined]
                .join(Customer, InvoiceEntity.customer_id == Customer.id)
                      ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:723:23: error: Name
"Customer" is not defined  [name-defined]
                .group_by(Customer.partner_id)
                          ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py: note: In member "get_aging_by_region" of class "AgingReportGenerator":
src/dotmac/platform/billing/reports/generators.py:758:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.billing_country,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:816:19: error: Name
"Customer" is not defined  [name-defined]
                .join(Customer, InvoiceEntity.customer_id == Customer.id)
                      ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:825:23: error: Name
"Customer" is not defined  [name-defined]
                .group_by(Customer.billing_country)
                          ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py: note: In member "get_blocked_customers_summary" of class "BlockedCustomersReportGenerator":
src/dotmac/platform/billing/reports/generators.py:891:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.id.label("customer_id"),
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:892:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.full_name,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:893:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.email,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:894:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.phone,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:898:19: error: Name
"Customer" is not defined  [name-defined]
                .join(Customer, Subscriber.customer_id == Customer.id)
                      ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:902:50: error: Name
"Customer" is not defined  [name-defined]
                        InvoiceEntity.customer_id == Customer.id,
                                                     ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:918:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.id,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:919:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.full_name,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:920:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.email,
                    ^~~~~~~~
src/dotmac/platform/billing/reports/generators.py:921:17: error: Name
"Customer" is not defined  [name-defined]
                    Customer.phone,
                    ^~~~~~~~
src/dotmac/platform/services/lifecycle/service.py: note: In member "terminate_service" of class "LifecycleOrchestrationService":
src/dotmac/platform/services/lifecycle/service.py:841:17: error: Name "logger"
is not defined  [name-defined]
                    logger.info(
                    ^~~~~~
src/dotmac/platform/services/lifecycle/service.py:850:17: error: Name "logger"
is not defined  [name-defined]
                    logger.warning(
                    ^~~~~~
src/dotmac/platform/user_management/service.py: note: In member "create_user" of class "UserService":
src/dotmac/platform/user_management/service.py:160:31: error: Argument
"tenant_id" to "publish" of "EventBus" has incompatible type "str | None";
expected "str"  [arg-type]
                        tenant_id=tenant_id,
                                  ^~~~~~~~~
src/dotmac/platform/user_management/service.py: note: In member "update_user" of class "UserService":
src/dotmac/platform/user_management/service.py:269:31: error: Argument
"tenant_id" to "publish" of "EventBus" has incompatible type "str | None";
expected "str"  [arg-type]
                        tenant_id=tenant_id,
                                  ^~~~~~~~~
src/dotmac/platform/user_management/service.py: note: In member "delete_user" of class "UserService":
src/dotmac/platform/user_management/service.py:305:27: error: Argument
"tenant_id" to "publish" of "EventBus" has incompatible type "str | None";
expected "str"  [arg-type]
                    tenant_id=tenant_id,
                              ^~~~~~~~~
src/dotmac/platform/network/schemas.py:12:1: error: Module "pydantic" has no
attribute "field_serializer"  [attr-defined]
    from pydantic import ConfigDict, Field, field_serializer
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/ip_management/schemas.py:10:1: error: Module "pydantic" has
no attribute "field_serializer"  [attr-defined]
    from pydantic import ConfigDict, Field, field_serializer
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/websocket_manager.py: note: In member "connect" of class "TechnicianLocationWebSocketManager":
src/dotmac/platform/field_service/websocket_manager.py:35:5: error: Function is
missing a return type annotation  [no-untyped-def]
        async def connect(self, websocket: WebSocket, tenant_id: str, conn...
        ^
src/dotmac/platform/field_service/websocket_manager.py: note: In member "disconnect" of class "TechnicianLocationWebSocketManager":
src/dotmac/platform/field_service/websocket_manager.py:63:5: error: Function is
missing a return type annotation  [no-untyped-def]
        def disconnect(self, connection_id: str):
        ^
src/dotmac/platform/field_service/websocket_manager.py: note: In member "broadcast_to_tenant" of class "TechnicianLocationWebSocketManager":
src/dotmac/platform/field_service/websocket_manager.py:92:5: error: Function is
missing a return type annotation  [no-untyped-def]
        async def broadcast_to_tenant(self, tenant_id: str, message: dict)...
        ^
src/dotmac/platform/field_service/websocket_manager.py: note: In member "send_to_connection" of class "TechnicianLocationWebSocketManager":
src/dotmac/platform/field_service/websocket_manager.py:131:5: error: Function
is missing a return type annotation  [no-untyped-def]
        async def send_to_connection(self, connection_id: str, message: di...
        ^
src/dotmac/platform/project_management/event_handlers.py: note: In function "find_best_team":
src/dotmac/platform/project_management/event_handlers.py:105:13: error:
Incompatible types in assignment (expression has type "float | int", variable
has type "int")  [assignment]
                score += skill_match_ratio * 50  # Skills worth up to 50 p...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:128:17: error:
Incompatible types in assignment (expression has type
"ColumnElement[float | Decimal]", variable has type "int")  [assignment]
                    score += capacity_score
                    ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:135:13: error:
Incompatible types in assignment (expression has type "ColumnElement[float]",
variable has type "int")  [assignment]
                score += team.completion_rate * 20  # Up to 20 points for ...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:153:16: error:
Incompatible return value type (got "Column[UUID]", expected "UUID | None") 
[return-value]
            return best_team_id
                   ^~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py: note: In function "handle_order_completed_create_project":
src/dotmac/platform/project_management/event_handlers.py:193:55: error:
Argument 2 to "TemplateBuilderService" has incompatible type "Any | str | None";
expected "str"  [arg-type]
                service = TemplateBuilderService(session, tenant_id)
                                                          ^~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:206:58: error:
Argument 1 to "get_template" of "TemplateBuilderService" has incompatible type
"Column[UUID]"; expected "UUID"  [arg-type]
    ...        db_template = await service.get_template(db_template.id, inclu...
                                                        ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:209:37: error: Item
"None" of "ProjectTemplate | None" has no attribute "id"  [union-attr]
                        template_id=str(db_template.id),
                                        ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:210:35: error: Item
"None" of "ProjectTemplate | None" has no attribute "template_code" 
[union-attr]
                        template_code=db_template.template_code,
                                      ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:263:40: error: Item
"None" of "ProjectTemplate | None" has no attribute "name_pattern"  [union-attr]
                    project_name_pattern = template.name_pattern
                                           ^~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:264:47: error: Item
"None" of "ProjectTemplate | None" has no attribute "description_pattern" 
[union-attr]
                    project_description_pattern = template.description_pat...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/event_handlers.py:264:47: error:
Incompatible types in assignment (expression has type "str | Any", variable has
type "Column[str]")  [assignment]
                    project_description_pattern = template.description_pat...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/event_handlers.py:265:38: error: Item
"None" of "ProjectTemplate | None" has no attribute "estimated_duration_hours" 
[union-attr]
                    estimated_duration = template.estimated_duration_hours
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:265:38: error:
Incompatible types in assignment (expression has type "float | Any", variable
has type "Column[float]")  [assignment]
                    estimated_duration = template.estimated_duration_hours
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:266:28: error: Item
"None" of "ProjectTemplate | None" has no attribute "priority"  [union-attr]
                    priority = template.priority
                               ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:266:28: error:
Incompatible types in assignment (expression has type "TaskPriority | Any",
variable has type "Column[str]")  [assignment]
                    priority = template.priority
                               ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:267:38: error: Item
"None" of "ProjectTemplate | None" has no attribute "required_team_type" 
[union-attr]
                    required_team_type = template.required_team_type
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:267:38: error:
Incompatible types in assignment (expression has type "str | Any", variable has
type "Column[str]")  [assignment]
                    required_team_type = template.required_team_type
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:268:34: error: Item
"None" of "ProjectTemplate | None" has no attribute "tasks"  [union-attr]
                    template_tasks = template.tasks
                                     ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:278:17: error:
Argument 1 to "render_template" has incompatible type "Column[str] | str";
expected "str | None"  [arg-type]
                    project_name_pattern,
                    ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:284:17: error:
Argument 1 to "render_template" has incompatible type "Column[str]"; expected
"str | None"  [arg-type]
                    project_description_pattern,
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:291:13: error: Need
type annotation for "all_required_skills" (hint:
"all_required_skills: dict[<type>, <type>] = ...")  [var-annotated]
                all_required_skills = {}
                ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:299:27: error:
Argument "tenant_id" to "find_best_team" has incompatible type
"Any | str | None"; expected "str"  [arg-type]
                    tenant_id=tenant_id,
                              ^~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:300:36: error:
Argument "required_team_type" to "find_best_team" has incompatible type
"Column[str]"; expected "str | None"  [arg-type]
                    required_team_type=required_team_type,
                                       ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:307:63: error:
Argument "hours" to "timedelta" has incompatible type "Column[float] | float";
expected "float"  [arg-type]
    ...cheduled_end = scheduled_start + timedelta(hours=estimated_duration or...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/event_handlers.py:310:23: error:
Incompatible types in assignment (expression has type
"ProjectManagementService", variable has type "TemplateBuilderService") 
[assignment]
                service = ProjectManagementService(session, tenant_id)
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:310:57: error:
Argument 2 to "ProjectManagementService" has incompatible type
"Any | str | None"; expected "str"  [arg-type]
                service = ProjectManagementService(session, tenant_id)
                                                            ^~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:316:29: error: Item
"None" of "ProjectTemplate | None" has no attribute "project_type"  [union-attr]
                    proj_type = template.project_type
                                ^~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:316:29: error:
Incompatible types in assignment (expression has type "ProjectType | Any",
variable has type "Column[str]")  [assignment]
                    proj_type = template.project_type
                                ^~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:334:29: error:
"TemplateBuilderService" has no attribute "create_project"  [attr-defined]
                project = await service.create_project(
                                ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:348:13: error: Need
type annotation for "task_id_map" (hint:
"task_id_map: dict[<type>, <type>] = ...")  [var-annotated]
                task_id_map = {}  # Map template sequence_order to actual ...
                ^~~~~~~~~~~
src/dotmac/platform/project_management/event_handlers.py:401:30: error:
"TemplateBuilderService" has no attribute "create_task"  [attr-defined]
                    task = await service.create_task(task_data, created_by...
                                 ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/radius/service.py: note: In member "authorize_subscriber" of class "RADIUSService":
src/dotmac/platform/radius/service.py:1538:18: error: Name
"RADIUSAuthorizationRequest" is not defined  [name-defined]
            request: "RADIUSAuthorizationRequest",
                     ^
src/dotmac/platform/radius/service.py:1539:10: error: Name
"RADIUSAuthorizationResponse" is not defined  [name-defined]
        ) -> "RADIUSAuthorizationResponse":
             ^
src/dotmac/platform/genieacs/service.py: note: In member "_build_wan_params" of class "GenieACSService":
src/dotmac/platform/genieacs/service.py:1127:113: error: Incompatible types in
assignment (expression has type "bool", target has type "str")  [assignment]
    ...evice.1.WANConnectionDevice.1.WANIPConnection.1.X_IPV6_Enable"] = True
                                                                         ^~~~
src/dotmac/platform/genieacs/service.py:1134:115: error: Incompatible types in
assignment (expression has type "bool", target has type "str")  [assignment]
    ...ice.1.WANConnectionDevice.1.WANIPConnection.1.X_DHCPv6_Enable"] = True
                                                                         ^~~~
src/dotmac/platform/genieacs/service.py:1139:17: error: Incompatible types in
assignment (expression has type "bool", target has type "str")  [assignment]
                ] = True
                    ^~~~
src/dotmac/platform/genieacs/service.py:1150:69: error: Incompatible types in
assignment (expression has type "bool", target has type "str")  [assignment]
    ...              params["Device.DHCPv6.Client.1.RequestAddresses"] = True
                                                                         ^~~~
src/dotmac/platform/genieacs/service.py:1151:68: error: Incompatible types in
assignment (expression has type "bool", target has type "str")  [assignment]
    ...               params["Device.DHCPv6.Client.1.RequestPrefixes"] = True
                                                                         ^~~~
src/dotmac/platform/orchestration/workflows/provision_subscriber.py: note: In function "allocate_ip_handler":
src/dotmac/platform/orchestration/workflows/provision_subscriber.py:645:37: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
                log_msg += f", IPv6 PD: {ipv6_pd_allocation['prefix']}"
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/orchestration/workflows/provision_subscriber.py:675:51: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
    ...                   log_extra["ipv6_pd_prefix"] = ipv6_pd_allocation["p...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/orchestration/workflows/provision_subscriber.py:680:34: error:
Value of type "dict[str, Any] | None" is not indexable  [index]
                        (f", ipv6_pd={ipv6_pd_allocation['prefix']}" if ha...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/data_transfer/tasks.py: note: In function "_publish_export_webhook":
src/dotmac/platform/data_transfer/tasks.py:456:23: error: Argument "tenant_id"
to "publish" of "EventBus" has incompatible type "str | None"; expected "str" 
[arg-type]
                tenant_id=tenant_id,
                          ^~~~~~~~~
src/dotmac/platform/data_transfer/tasks.py: note: In function "_publish_import_webhook":
src/dotmac/platform/data_transfer/tasks.py:513:23: error: Argument "tenant_id"
to "publish" of "EventBus" has incompatible type "str | None"; expected "str" 
[arg-type]
                tenant_id=tenant_id,
                          ^~~~~~~~~
src/dotmac/platform/ticketing/handlers.py:25:80: error:
"ExternalServicesSettings" has no attribute "brand"  [attr-defined]
    ...gs.external_services, 'brand', None) and getattr(settings.external_ser...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/ticketing/handlers.py:26:83: error:
"ExternalServicesSettings" has no attribute "brand"  [attr-defined]
    ...gs.external_services, 'brand', None) and getattr(settings.external_ser...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/ticketing/handlers.py:27:88: error:
"ExternalServicesSettings" has no attribute "brand"  [attr-defined]
    ...gs.external_services, 'brand', None) and getattr(settings.external_ser...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/ticketing/handlers.py: note: In function "handle_order_completed_create_installation_ticket":
src/dotmac/platform/ticketing/handlers.py:594:5: error: Module
"dotmac.platform.auth.models" has no attribute "UserInfo"  [attr-defined]
        from dotmac.platform.auth.models import UserInfo
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/handlers.py:611:9: error: Module
"dotmac.platform.db" has no attribute "SessionLocal"; maybe "SyncSessionLocal"
or "AsyncSessionLocal"?  [attr-defined]
            from dotmac.platform.db import SessionLocal
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/handlers.py:665:26: error: Missing positional
argument "session" in call to "TicketService"  [call-arg]
            ticket_service = TicketService()
                             ^~~~~~~~~~~~~~~
src/dotmac/platform/ticketing/handlers.py:688:25: error: Argument "resource_id"
to "log_activity" of "AuditService" has incompatible type "UUID"; expected
"str | None"  [arg-type]
                resource_id=ticket.id,
                            ^~~~~~~~~
src/dotmac/platform/jobs/handlers.py: note: In function "_auto_assign_technician":
src/dotmac/platform/jobs/handlers.py:26:1: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
    async def _auto_assign_technician(session, job, ticket, tenant_id: str...
    ^
src/dotmac/platform/jobs/handlers.py: note: In function "handle_installation_ticket_create_job":
src/dotmac/platform/jobs/handlers.py:222:27: error: Argument "tenant_id" to
"create_job" of "JobService" has incompatible type "Any | str | None"; expected
"str"  [arg-type]
                    tenant_id=tenant_id,
                              ^~~~~~~~~
src/dotmac/platform/jobs/handlers.py:238:65: error: Argument 4 to
"_auto_assign_technician" has incompatible type "Any | str | None"; expected
"str"  [arg-type]
    ...        await _auto_assign_technician(session, job, ticket, tenant_id)
                                                                   ^~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:21:1: error:
Module "dotmac.platform.tenant.tenant" has no attribute "get_current_tenant_id" 
[attr-defined]
    from dotmac.platform.tenant.tenant import get_current_tenant_id
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "clock_in":
src/dotmac/platform/project_management/time_resource_router.py:191:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def clock_in(
    ^
src/dotmac/platform/project_management/time_resource_router.py:271:5: error:
Cannot assign to a method  [method-assign]
        time_entry.is_active = time_entry.is_active()
        ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:271:28: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        time_entry.is_active = time_entry.is_active()
                               ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:272:30: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.total_hours = time_entry.calculate_hours()
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:273:29: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.total_cost = time_entry.calculate_cost()
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "clock_out":
src/dotmac/platform/project_management/time_resource_router.py:282:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def clock_out(
    ^
src/dotmac/platform/project_management/time_resource_router.py:316:28: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
        time_entry.clock_out = datetime.now()
                               ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:317:32: error:
Incompatible types in assignment (expression has type "float | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.clock_out_lat = clock_out_request.latitude
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:318:32: error:
Incompatible types in assignment (expression has type "float | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.clock_out_lng = clock_out_request.longitude
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:319:41: error:
Incompatible types in assignment (expression has type "float | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.break_duration_minutes = clock_out_request.break_durati...
                                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/time_resource_router.py:321:28: error:
Incompatible types in assignment (expression has type "str", variable has type
"Column[str]")  [assignment]
            time_entry.notes = clock_out_request.notes
                               ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:322:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        time_entry.updated_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:325:30: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.total_hours = time_entry.calculate_hours()
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:326:29: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
        time_entry.total_cost = time_entry.calculate_cost()
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:331:5: error:
Cannot assign to a method  [method-assign]
        time_entry.is_active = time_entry.is_active()
        ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:331:28: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        time_entry.is_active = time_entry.is_active()
                               ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "list_time_entries":
src/dotmac/platform/project_management/time_resource_router.py:340:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_time_entries(
    ^
src/dotmac/platform/project_management/time_resource_router.py:377:9: error:
Cannot assign to a method  [method-assign]
            entry.is_active = entry.is_active()
            ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:377:27: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            entry.is_active = entry.is_active()
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:379:33: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
                entry.total_hours = entry.calculate_hours()
                                    ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:381:32: error:
Incompatible types in assignment (expression has type "Decimal | None", variable
has type "Column[Decimal]")  [assignment]
                entry.total_cost = entry.calculate_cost()
                                   ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "create_equipment":
src/dotmac/platform/project_management/time_resource_router.py:395:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def create_equipment(
    ^
src/dotmac/platform/project_management/time_resource_router.py:414:5: error:
Cannot assign to a method  [method-assign]
        db_equipment.is_available = db_equipment.is_available()
        ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:414:33: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        db_equipment.is_available = db_equipment.is_available()
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:415:5: error:
Cannot assign to a method  [method-assign]
        db_equipment.needs_maintenance = db_equipment.needs_maintenance()
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:415:38: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        db_equipment.needs_maintenance = db_equipment.needs_maintenance()
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "list_equipment":
src/dotmac/platform/project_management/time_resource_router.py:424:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_equipment(
    ^
src/dotmac/platform/project_management/time_resource_router.py:455:9: error:
Cannot assign to a method  [method-assign]
            eq.is_available = eq.is_available()
            ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:455:27: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            eq.is_available = eq.is_available()
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:456:9: error:
Cannot assign to a method  [method-assign]
            eq.needs_maintenance = eq.needs_maintenance()
            ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:456:32: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            eq.needs_maintenance = eq.needs_maintenance()
                                   ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "create_vehicle":
src/dotmac/platform/project_management/time_resource_router.py:470:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def create_vehicle(
    ^
src/dotmac/platform/project_management/time_resource_router.py:489:5: error:
Cannot assign to a method  [method-assign]
        db_vehicle.is_available = db_vehicle.is_available()
        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:489:31: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        db_vehicle.is_available = db_vehicle.is_available()
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:490:5: error:
Cannot assign to a method  [method-assign]
        db_vehicle.needs_service = db_vehicle.needs_service()
        ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:490:32: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        db_vehicle.needs_service = db_vehicle.needs_service()
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "list_vehicles":
src/dotmac/platform/project_management/time_resource_router.py:499:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_vehicles(
    ^
src/dotmac/platform/project_management/time_resource_router.py:530:9: error:
Cannot assign to a method  [method-assign]
            v.is_available = v.is_available()
            ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:530:26: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            v.is_available = v.is_available()
                             ^~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:531:9: error:
Cannot assign to a method  [method-assign]
            v.needs_service = v.needs_service()
            ^~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:531:27: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            v.needs_service = v.needs_service()
                              ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "assign_resource":
src/dotmac/platform/project_management/time_resource_router.py:545:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def assign_resource(
    ^
src/dotmac/platform/project_management/time_resource_router.py:594:28: error:
Incompatible types in assignment (expression has type "EquipmentStatus",
variable has type "Column[Any]")  [assignment]
            equipment.status = EquipmentStatus.IN_USE
                               ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:595:47: error:
Incompatible types in assignment (expression has type "UUID", variable has type
"Column[UUID]")  [assignment]
            equipment.assigned_to_technician_id = assignment.technician_id
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:612:26: error:
Incompatible types in assignment (expression has type "VehicleStatus", variable
has type "Column[Any]")  [assignment]
            vehicle.status = VehicleStatus.IN_USE
                             ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:613:45: error:
Incompatible types in assignment (expression has type "UUID", variable has type
"Column[UUID]")  [assignment]
            vehicle.assigned_to_technician_id = assignment.technician_id
                                                ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:630:5: error:
Cannot assign to a method  [method-assign]
        db_assignment.is_active = db_assignment.is_active()
        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:630:31: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        db_assignment.is_active = db_assignment.is_active()
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "return_resource":
src/dotmac/platform/project_management/time_resource_router.py:639:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def return_resource(
    ^
src/dotmac/platform/project_management/time_resource_router.py:675:30: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
        assignment.returned_at = datetime.now()
                                 ^~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:676:25: error:
Incompatible types in assignment (expression has type
"ResourceAssignmentStatus", variable has type "Column[Any]")  [assignment]
        assignment.status = ResourceAssignmentStatus.RETURNED
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:677:38: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
        assignment.condition_at_return = condition
                                         ^~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:678:37: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
        assignment.damage_description = damage_description
                                        ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:679:31: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
        assignment.return_notes = notes
                                  ^~~~~
src/dotmac/platform/project_management/time_resource_router.py:680:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        assignment.updated_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:693:5: error:
Cannot assign to a method  [method-assign]
        assignment.is_active = assignment.is_active()
        ^~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:693:28: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
        assignment.is_active = assignment.is_active()
                               ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py: note: In function "list_resource_assignments":
src/dotmac/platform/project_management/time_resource_router.py:702:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_resource_assignments(
    ^
src/dotmac/platform/project_management/time_resource_router.py:728:9: error:
Cannot assign to a method  [method-assign]
            a.is_active = a.is_active()
            ^~~~~~~~~~~
src/dotmac/platform/project_management/time_resource_router.py:728:23: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Callable[[], bool]")  [assignment]
            a.is_active = a.is_active()
                          ^~~~~~~~~~~~~
src/dotmac/platform/project_management/template_router.py:13:1: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
    from dotmac.platform.auth.models import User
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/template_router.py:14:1: error: Module
"dotmac.platform.auth.rbac_dependencies" has no attribute
"get_current_active_user"  [attr-defined]
    from dotmac.platform.auth.rbac_dependencies import get_current_active_...
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/template_router.py: note: In function "create_template":
src/dotmac/platform/project_management/template_router.py:41:1: error: Function
is missing a return type annotation  [no-untyped-def]
    async def create_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "get_template":
src/dotmac/platform/project_management/template_router.py:85:1: error: Function
is missing a return type annotation  [no-untyped-def]
    async def get_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "list_templates":
src/dotmac/platform/project_management/template_router.py:104:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_templates(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "update_template":
src/dotmac/platform/project_management/template_router.py:143:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def update_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "delete_template":
src/dotmac/platform/project_management/template_router.py:166:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def delete_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "clone_template":
src/dotmac/platform/project_management/template_router.py:186:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def clone_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "preview_template":
src/dotmac/platform/project_management/template_router.py:228:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def preview_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "add_task_to_template":
src/dotmac/platform/project_management/template_router.py:266:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def add_task_to_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "update_task_template":
src/dotmac/platform/project_management/template_router.py:301:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def update_task_template(
    ^
src/dotmac/platform/project_management/template_router.py: note: In function "delete_task_template":
src/dotmac/platform/project_management/template_router.py:324:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def delete_task_template(
    ^
src/dotmac/platform/project_management/scheduling_router.py:18:1: error: Module
"dotmac.platform.tenant.tenant" has no attribute "get_current_tenant_id" 
[attr-defined]
    from dotmac.platform.tenant.tenant import get_current_tenant_id
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "create_technician_schedule":
src/dotmac/platform/project_management/scheduling_router.py:67:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def create_technician_schedule(
    ^
src/dotmac/platform/project_management/scheduling_router.py: note: In function "get_technician_schedules":
src/dotmac/platform/project_management/scheduling_router.py:133:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def get_technician_schedules(
    ^
src/dotmac/platform/project_management/scheduling_router.py: note: In function "update_technician_schedule":
src/dotmac/platform/project_management/scheduling_router.py:165:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def update_technician_schedule(
    ^
src/dotmac/platform/project_management/scheduling_router.py:195:27: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        schedule.updated_by = current_user.get("sub")
                              ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "create_task_assignment":
src/dotmac/platform/project_management/scheduling_router.py:212:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def create_task_assignment(
    ^
src/dotmac/platform/project_management/scheduling_router.py: note: In function "auto_assign_task":
src/dotmac/platform/project_management/scheduling_router.py:308:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def auto_assign_task(
    ^
src/dotmac/platform/project_management/scheduling_router.py:360:49: error:
Incompatible types in assignment (expression has type "bool", variable has type
"Column[bool]")  [assignment]
        assignment.customer_confirmation_required = auto_assignment.custom...
                                                    ^~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/scheduling_router.py:361:24: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "Column[str]")  [assignment]
        assignment.notes = auto_assignment.notes
                           ^~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:362:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        assignment.created_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "get_assignment_candidates":
src/dotmac/platform/project_management/scheduling_router.py:374:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def get_assignment_candidates(
    ^
src/dotmac/platform/project_management/scheduling_router.py:410:25: error:
Argument "scheduled_start" to "find_best_technician" of
"TaskAssignmentAlgorithm" has incompatible type "Column[datetime]"; expected
"datetime"  [arg-type]
            scheduled_start=assignment.scheduled_start,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:411:23: error:
Argument "scheduled_end" to "find_best_technician" of "TaskAssignmentAlgorithm"
has incompatible type "Column[datetime]"; expected "datetime"  [arg-type]
            scheduled_end=assignment.scheduled_end,
                          ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:412:23: error:
Argument "task_location" to "find_best_technician" of "TaskAssignmentAlgorithm"
has incompatible type "tuple[Column[float], Column[float]] | None"; expected
"tuple[float, float] | None"  [arg-type]
            task_location=task_location,
                          ^~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "list_task_assignments":
src/dotmac/platform/project_management/scheduling_router.py:441:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def list_task_assignments(
    ^
src/dotmac/platform/project_management/scheduling_router.py: note: In function "update_task_assignment":
src/dotmac/platform/project_management/scheduling_router.py:478:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def update_task_assignment(
    ^
src/dotmac/platform/project_management/scheduling_router.py:508:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        assignment.updated_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "reschedule_task_assignment":
src/dotmac/platform/project_management/scheduling_router.py:520:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def reschedule_task_assignment(
    ^
src/dotmac/platform/project_management/scheduling_router.py:550:34: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
        assignment.scheduled_start = reschedule.new_scheduled_start
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:551:32: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "Column[datetime]")  [assignment]
        assignment.scheduled_end = reschedule.new_scheduled_end
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:552:5: error:
Incompatible types in assignment (expression has type "ColumnElement[int]",
variable has type "Column[int]")  [assignment]
        assignment.reschedule_count += 1
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:553:36: error:
Incompatible types in assignment (expression has type "str", variable has type
"Column[str]")  [assignment]
        assignment.reschedule_reason = reschedule.reason
                                       ^~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:554:25: error:
Incompatible types in assignment (expression has type "AssignmentStatus",
variable has type "Column[Any]")  [assignment]
        assignment.status = AssignmentStatus.RESCHEDULED
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:555:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        assignment.updated_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "cancel_task_assignment":
src/dotmac/platform/project_management/scheduling_router.py:569:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def cancel_task_assignment(
    ^
src/dotmac/platform/project_management/scheduling_router.py:593:25: error:
Incompatible types in assignment (expression has type "AssignmentStatus",
variable has type "Column[Any]")  [assignment]
        assignment.status = AssignmentStatus.CANCELLED
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py:594:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "Column[str]")  [assignment]
        assignment.updated_by = current_user.get("sub")
                                ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/scheduling_router.py: note: In function "check_availability":
src/dotmac/platform/project_management/scheduling_router.py:607:1: error:
Function is missing a return type annotation  [no-untyped-def]
    async def check_availability(
    ^
src/dotmac/platform/project_management/router.py:13:1: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
    from dotmac.platform.auth.models import User
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/project_management/router.py:14:1: error: Module
"dotmac.platform.auth.rbac_dependencies" has no attribute
"get_current_active_user"  [attr-defined]
    from dotmac.platform.auth.rbac_dependencies import get_current_active_...
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/project_management/router.py: note: In function "create_project":
src/dotmac/platform/project_management/router.py:44:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def create_project(
    ^
src/dotmac/platform/project_management/router.py: note: In function "get_project":
src/dotmac/platform/project_management/router.py:72:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_project(
    ^
src/dotmac/platform/project_management/router.py: note: In function "list_projects":
src/dotmac/platform/project_management/router.py:92:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_projects(
    ^
src/dotmac/platform/project_management/router.py: note: In function "update_project":
src/dotmac/platform/project_management/router.py:137:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def update_project(
    ^
src/dotmac/platform/project_management/router.py: note: In function "delete_project":
src/dotmac/platform/project_management/router.py:159:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def delete_project(
    ^
src/dotmac/platform/project_management/router.py: note: In function "create_task":
src/dotmac/platform/project_management/router.py:183:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def create_task(
    ^
src/dotmac/platform/project_management/router.py: note: In function "get_task":
src/dotmac/platform/project_management/router.py:212:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_task(
    ^
src/dotmac/platform/project_management/router.py: note: In function "list_tasks":
src/dotmac/platform/project_management/router.py:231:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_tasks(
    ^
src/dotmac/platform/project_management/router.py: note: In function "update_task":
src/dotmac/platform/project_management/router.py:276:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def update_task(
    ^
src/dotmac/platform/project_management/router.py: note: In function "delete_task":
src/dotmac/platform/project_management/router.py:296:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def delete_task(
    ^
src/dotmac/platform/project_management/router.py: note: In function "create_team":
src/dotmac/platform/project_management/router.py:320:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def create_team(
    ^
src/dotmac/platform/project_management/router.py: note: In function "get_team":
src/dotmac/platform/project_management/router.py:347:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_team(
    ^
src/dotmac/platform/project_management/router.py: note: In function "list_teams":
src/dotmac/platform/project_management/router.py:366:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_teams(
    ^
src/dotmac/platform/project_management/router.py: note: In function "update_team":
src/dotmac/platform/project_management/router.py:393:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def update_team(
    ^
src/dotmac/platform/platform_admin/billing_router.py: note: In function "list_all_invoices":
src/dotmac/platform/platform_admin/billing_router.py:99:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_all_invoices(
    ^
src/dotmac/platform/platform_admin/billing_router.py:99:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def list_all_invoices(
    ^
src/dotmac/platform/platform_admin/billing_router.py:134:41: error:
"type[Invoice]" has no attribute "id"  [attr-defined]
            count_query = select(func.count(Invoice.id))
                                            ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:136:51: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"Literal[True] | ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                count_query = count_query.where(and_(*filters))
                                                      ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:136:51: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                count_query = count_query.where(and_(*filters))
                                                      ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:142:70: error: Item
"datetime" of "datetime | None" has no attribute "desc"  [union-attr]
    ...ct(Invoice).limit(limit).offset(offset).order_by(Invoice.created_at.de...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:142:70: error: Item "None"
of "datetime | None" has no attribute "desc"  [union-attr]
    ...ct(Invoice).limit(limit).offset(offset).order_by(Invoice.created_at.de...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:145:39: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"Literal[True] | ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                query = query.where(and_(*filters))
                                          ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:145:39: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                query = query.where(and_(*filters))
                                          ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:154:23: error: "Invoice"
has no attribute "id"  [attr-defined]
                    "id": invoice.id,
                          ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:158:27: error: "Invoice"
has no attribute "amount_due"; maybe "net_amount_due"?  [attr-defined]
                    "amount": invoice.amount_due,
                              ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:159:32: error: "Invoice"
has no attribute "amount_paid"  [attr-defined]
                    "amount_paid": invoice.amount_paid or 0,
                                   ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:160:37: error: "Invoice"
has no attribute "amount_remaining"  [attr-defined]
                    "amount_remaining": invoice.amount_remaining or invoic...
                                        ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:160:65: error: "Invoice"
has no attribute "amount_due"; maybe "net_amount_due"?  [attr-defined]
    ...   "amount_remaining": invoice.amount_remaining or invoice.amount_due,
                                                          ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:163:31: error: Item "None"
of "datetime | None" has no attribute "isoformat"  [union-attr]
                    "created_at": invoice.created_at.isoformat(),
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:172:17: error: No overload
variant of "select" matches argument types "str", "str", "Label[int]",
"Label[Any]", "Label[Any]"  [call-overload]
                    select(
                    ^
src/dotmac/platform/platform_admin/billing_router.py:172:17: note: Possible overload variants:
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], /) -> Select[tuple[_T0]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], /) -> Select[tuple[_T0, _T1]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], /) -> Select[tuple[_T0, _T1, _T2]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], /) -> Select[tuple[_T0, _T1, _T2, _T3]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any, _T9: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], TypedColumnsClauseRole[_T9] | SQLCoreOperations[_T9] | type[_T9], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8, _T9]]
src/dotmac/platform/platform_admin/billing_router.py:172:17: note:     def select(*entities: TypedColumnsClauseRole[Any] | ColumnsClauseRole | SQLCoreOperations[Any] | Literal['*', 1] | type[Any] | Inspectable[_HasClauseElement[Any]] | _HasClauseElement[Any], **Any) -> Select[Any]
src/dotmac/platform/platform_admin/billing_router.py:175:32: error:
"type[Invoice]" has no attribute "id"  [attr-defined]
                        func.count(Invoice.id).label("count"),
                                   ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:176:30: error:
"type[Invoice]" has no attribute "amount_due"  [attr-defined]
                        func.sum(Invoice.amount_due).label("total_amount")...
                                 ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:177:30: error:
"type[Invoice]" has no attribute "amount_paid"  [attr-defined]
                        func.sum(Invoice.amount_paid).label("total_paid"),
                                 ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:214:36: error:
"type[InvoiceStatus]" has no attribute "UNCOLLECTIBLE"  [attr-defined]
                    elif row.status == InvoiceStatus.UNCOLLECTIBLE:
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:236:25: error: Item
"InvoiceStatus" of "InvoiceStatus | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:236:25: error: Item "None"
of "InvoiceStatus | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py: note: In function "list_all_payments":
src/dotmac/platform/platform_admin/billing_router.py:247:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_all_payments(
    ^
src/dotmac/platform/platform_admin/billing_router.py:247:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def list_all_payments(
    ^
src/dotmac/platform/platform_admin/billing_router.py:272:41: error:
"type[Payment]" has no attribute "id"  [attr-defined]
            count_query = select(func.count(Payment.id))
                                            ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:274:51: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"Literal[True] | ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                count_query = count_query.where(and_(*filters))
                                                      ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:274:51: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                count_query = count_query.where(and_(*filters))
                                                      ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:280:70: error: "datetime"
has no attribute "desc"  [attr-defined]
    ...ct(Payment).limit(limit).offset(offset).order_by(Payment.created_at.de...
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:283:39: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"Literal[True] | ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                query = query.where(and_(*filters))
                                          ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:283:39: error: Argument 1
to "and_" has incompatible type "*list[bool]"; expected
"ColumnElement[bool] | _HasClauseElement[bool] | SQLCoreOperations[bool] | ExpressionElementRole[bool] | TypedColumnsClauseRole[bool] | Callable[[], ColumnElement[bool]] | LambdaElement"
 [arg-type]
                query = query.where(and_(*filters))
                                          ^~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:292:23: error: "Payment"
has no attribute "id"  [attr-defined]
                    "id": payment.id,
                          ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:294:31: error: "Payment"
has no attribute "invoice_id"; maybe "invoice_ids"?  [attr-defined]
                    "invoice_id": payment.invoice_id,
                                  ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:312:25: error: Item
"PaymentStatus" of "PaymentStatus | None" has no attribute
"HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:312:25: error: Item "None"
of "PaymentStatus | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR" 
[union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py: note: In function "get_platform_billing_summary":
src/dotmac/platform/platform_admin/billing_router.py:323:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_platform_billing_summary(
    ^
src/dotmac/platform/platform_admin/billing_router.py:323:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def get_platform_billing_summary(
    ^
src/dotmac/platform/platform_admin/billing_router.py:345:49: error:
"type[Invoice]" has no attribute "id"  [attr-defined]
            invoice_count_query = select(func.count(Invoice.id))
                                                    ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:350:49: error:
"type[Payment]" has no attribute "id"  [attr-defined]
            payment_count_query = select(func.count(Payment.id))
                                                    ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:356:22: error:
"type[Invoice]" has no attribute "amount_paid"  [attr-defined]
                func.sum(Invoice.amount_paid).label("total_revenue"),
                         ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:357:22: error:
"type[Invoice]" has no attribute "amount_remaining"  [attr-defined]
                func.sum(Invoice.amount_remaining).label("total_outstandin...
                         ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:367:13: error: No overload
variant of "select" matches argument types "str", "Label[int]"  [call-overload]
                select(Invoice.status, func.count(Invoice.id).label("count...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:367:13: note: Possible overload variants:
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], /) -> Select[tuple[_T0]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], /) -> Select[tuple[_T0, _T1]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], /) -> Select[tuple[_T0, _T1, _T2]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], /) -> Select[tuple[_T0, _T1, _T2, _T3]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any, _T9: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], TypedColumnsClauseRole[_T9] | SQLCoreOperations[_T9] | type[_T9], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8, _T9]]
src/dotmac/platform/platform_admin/billing_router.py:367:13: note:     def select(*entities: TypedColumnsClauseRole[Any] | ColumnsClauseRole | SQLCoreOperations[Any] | Literal['*', 1] | type[Any] | Inspectable[_HasClauseElement[Any]] | _HasClauseElement[Any], **Any) -> Select[Any]
src/dotmac/platform/platform_admin/billing_router.py:367:47: error:
"type[Invoice]" has no attribute "id"  [attr-defined]
                select(Invoice.status, func.count(Invoice.id).label("count...
                                                  ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:375:13: error: No overload
variant of "select" matches argument types "str", "str", "Label[int]",
"Label[Any]", "Label[Any]"  [call-overload]
                select(
                ^
src/dotmac/platform/platform_admin/billing_router.py:375:13: note: Possible overload variants:
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], /) -> Select[tuple[_T0]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], /) -> Select[tuple[_T0, _T1]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], /) -> Select[tuple[_T0, _T1, _T2]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], /) -> Select[tuple[_T0, _T1, _T2, _T3]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def [_T0: Any, _T1: Any, _T2: Any, _T3: Any, _T4: Any, _T5: Any, _T6: Any, _T7: Any, _T8: Any, _T9: Any] select(TypedColumnsClauseRole[_T0] | SQLCoreOperations[_T0] | type[_T0], TypedColumnsClauseRole[_T1] | SQLCoreOperations[_T1] | type[_T1], TypedColumnsClauseRole[_T2] | SQLCoreOperations[_T2] | type[_T2], TypedColumnsClauseRole[_T3] | SQLCoreOperations[_T3] | type[_T3], TypedColumnsClauseRole[_T4] | SQLCoreOperations[_T4] | type[_T4], TypedColumnsClauseRole[_T5] | SQLCoreOperations[_T5] | type[_T5], TypedColumnsClauseRole[_T6] | SQLCoreOperations[_T6] | type[_T6], TypedColumnsClauseRole[_T7] | SQLCoreOperations[_T7] | type[_T7], TypedColumnsClauseRole[_T8] | SQLCoreOperations[_T8] | type[_T8], TypedColumnsClauseRole[_T9] | SQLCoreOperations[_T9] | type[_T9], /) -> Select[tuple[_T0, _T1, _T2, _T3, _T4, _T5, _T6, _T7, _T8, _T9]]
src/dotmac/platform/platform_admin/billing_router.py:375:13: note:     def select(*entities: TypedColumnsClauseRole[Any] | ColumnsClauseRole | SQLCoreOperations[Any] | Literal['*', 1] | type[Any] | Inspectable[_HasClauseElement[Any]] | _HasClauseElement[Any], **Any) -> Select[Any]
src/dotmac/platform/platform_admin/billing_router.py:378:28: error:
"type[Invoice]" has no attribute "id"  [attr-defined]
                    func.count(Invoice.id).label("count"),
                               ^~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:379:26: error:
"type[Invoice]" has no attribute "amount_due"  [attr-defined]
                    func.sum(Invoice.amount_due).label("total_amount"),
                             ^~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:380:26: error:
"type[Invoice]" has no attribute "amount_paid"  [attr-defined]
                    func.sum(Invoice.amount_paid).label("total_paid"),
                             ^~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/billing_router.py:416:32: error:
"type[InvoiceStatus]" has no attribute "UNCOLLECTIBLE"  [attr-defined]
                elif row.status == InvoiceStatus.UNCOLLECTIBLE:
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/audit_router.py:19:1: error: Module
"dotmac.platform.audit.models" has no attribute "AuditLog"  [attr-defined]
    from dotmac.platform.audit.models import AuditLog
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/audit_router.py: note: In function "list_all_audit_logs":
src/dotmac/platform/platform_admin/audit_router.py:88:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def list_all_audit_logs(
    ^
src/dotmac/platform/platform_admin/audit_router.py:88:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def list_all_audit_logs(
    ^
src/dotmac/platform/platform_admin/audit_router.py:205:25: error: Item "str" of
"str | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/audit_router.py:205:25: error: Item "None"
of "str | None" has no attribute "HTTP_500_INTERNAL_SERVER_ERROR"  [union-attr]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/audit_router.py: note: In function "get_audit_summary_by_tenant":
src/dotmac/platform/platform_admin/audit_router.py:216:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_audit_summary_by_tenant(
    ^
src/dotmac/platform/platform_admin/audit_router.py:216:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def get_audit_summary_by_tenant(
    ^
src/dotmac/platform/platform_admin/audit_router.py: note: In function "get_action_counts":
src/dotmac/platform/platform_admin/audit_router.py:311:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_action_counts(
    ^
src/dotmac/platform/platform_admin/audit_router.py:311:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def get_action_counts(
    ^
src/dotmac/platform/geo/router.py:13:1: error: Module
"dotmac.platform.auth.rbac_dependencies" has no attribute
"get_current_active_user"  [attr-defined]
    from dotmac.platform.auth.rbac_dependencies import get_current_active_...
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/geo/router.py:14:1: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
    from dotmac.platform.auth.models import User
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/geo/router.py: note: In function "geocode_address":
src/dotmac/platform/geo/router.py:83:1: error: Function is missing a return
type annotation  [no-untyped-def]
    async def geocode_address(
    ^
src/dotmac/platform/geo/router.py: note: In function "reverse_geocode":
src/dotmac/platform/geo/router.py:121:1: error: Function is missing a return
type annotation  [no-untyped-def]
    async def reverse_geocode(
    ^
src/dotmac/platform/geo/router.py: note: In function "calculate_route":
src/dotmac/platform/geo/router.py:151:1: error: Function is missing a return
type annotation  [no-untyped-def]
    async def calculate_route(
    ^
src/dotmac/platform/geo/router.py: note: In function "get_route_summary":
src/dotmac/platform/geo/router.py:236:1: error: Function is missing a return
type annotation  [no-untyped-def]
    async def get_route_summary(
    ^
src/dotmac/platform/geo/router.py: note: In function "route_to_fiber_asset":
src/dotmac/platform/geo/router.py:280:1: error: Function is missing a return
type annotation  [no-untyped-def]
    async def route_to_fiber_asset(
    ^
src/dotmac/platform/field_service/router.py:16:1: error: Module
"dotmac.platform.auth.rbac_dependencies" has no attribute
"get_current_active_user"  [attr-defined]
    from dotmac.platform.auth.rbac_dependencies import get_current_active_...
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/field_service/router.py:17:1: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
    from dotmac.platform.auth.models import User
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "list_technicians":
src/dotmac/platform/field_service/router.py:36:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def list_technicians(
    ^
src/dotmac/platform/field_service/router.py:82:22: error:
"type[TechnicianResponse]" has no attribute "from_orm"  [attr-defined]
            technicians=[TechnicianResponse.from_orm(t) for t in technicia...
                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "get_technician":
src/dotmac/platform/field_service/router.py:90:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_technician(
    ^
src/dotmac/platform/field_service/router.py:114:12: error:
"type[TechnicianResponse]" has no attribute "from_orm"  [attr-defined]
        return TechnicianResponse.from_orm(technician)
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "update_technician_location":
src/dotmac/platform/field_service/router.py:118:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def update_technician_location(
    ^
src/dotmac/platform/field_service/router.py:149:30: error: Incompatible types
in assignment (expression has type "float", variable has type "Column[float]") 
[assignment]
        technician.current_lat = location_data.latitude
                                 ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py:150:30: error: Incompatible types
in assignment (expression has type "float", variable has type "Column[float]") 
[assignment]
        technician.current_lng = location_data.longitude
                                 ^~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py:151:39: error: Incompatible types
in assignment (expression has type "datetime", variable has type
"Column[datetime]")  [assignment]
        technician.last_location_update = datetime.utcnow()
                                          ^~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py:179:16: error: Argument "job_id" to
"check_geofence" of "GeofencingService" has incompatible type "str | None";
expected "UUID | None"  [arg-type]
            job_id=location_data.job_id if location_data.job_id else None,
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "get_active_technician_locations":
src/dotmac/platform/field_service/router.py:237:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_active_technician_locations(
    ^
src/dotmac/platform/field_service/router.py: note: In function "get_technician_location_history":
src/dotmac/platform/field_service/router.py:279:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_technician_location_history(
    ^
src/dotmac/platform/field_service/router.py: note: In function "websocket_technician_locations":
src/dotmac/platform/field_service/router.py:351:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def websocket_technician_locations(
    ^
src/dotmac/platform/field_service/router.py:385:5: error: Module
"dotmac.platform.auth.token_with_rbac" has no attribute "decode_token" 
[attr-defined]
        from dotmac.platform.auth.token_with_rbac import decode_token
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "get_nearby_jobs":
src/dotmac/platform/field_service/router.py:472:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_nearby_jobs(
    ^
src/dotmac/platform/field_service/router.py:517:21: error: Argument
"current_lat" to "get_nearby_jobs" of "GeofencingService" has incompatible type
"Column[float]"; expected "float"  [arg-type]
            current_lat=technician.current_lat,
                        ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py:518:21: error: Argument
"current_lng" to "get_nearby_jobs" of "GeofencingService" has incompatible type
"Column[float]"; expected "float"  [arg-type]
            current_lng=technician.current_lng,
                        ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py:533:27: error: "str" has no
attribute "value"  [attr-defined]
                    "status": job.status.value,
                              ^~~~~~~~~~~~~~~~
src/dotmac/platform/field_service/router.py: note: In function "get_job_time_on_site":
src/dotmac/platform/field_service/router.py:547:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_job_time_on_site(
    ^
src/dotmac/platform/field_service/router.py: note: In function "get_websocket_analytics":
src/dotmac/platform/field_service/router.py:586:1: error: Function is missing a
return type annotation  [no-untyped-def]
    async def get_websocket_analytics(
    ^
src/dotmac/platform/billing/reports/router.py: note: In function "get_session_history":
src/dotmac/platform/billing/reports/router.py:381:37: error: Name "timedelta"
is not defined  [name-defined]
                start_date = end_date - timedelta(days=30)
                                        ^~~~~~~~~
src/dotmac/platform/notifications/channels/email.py: note: In member "send" of class "EmailChannelProvider":
src/dotmac/platform/notifications/channels/email.py:43:25: error: Name
"EmailMessage" is not defined  [name-defined]
            email_message = EmailMessage(
                            ^~~~~~~~~~~~
src/dotmac/platform/radius/router.py: note: In function "get_subscriber_alerts":
src/dotmac/platform/radius/router.py:1014:17: error: Name "Radpostauth" is not
defined  [name-defined]
                    Radpostauth.username == subscriber.username,
                    ^~~~~~~~~~~
src/dotmac/platform/radius/router.py:1015:17: error: Name "Radpostauth" is not
defined  [name-defined]
                    Radpostauth.reply == "Access-Reject",
                    ^~~~~~~~~~~
src/dotmac/platform/radius/router.py:1016:17: error: Name "Radpostauth" is not
defined  [name-defined]
                    Radpostauth.authdate >= seven_days_ago,
                    ^~~~~~~~~~~
src/dotmac/platform/tenant/branding_router.py: note: In function "get_tenant_branding":
src/dotmac/platform/tenant/branding_router.py:79:46: error: Argument 1 to
"get_tenant_branding" of "TenantService" has incompatible type "str | None";
expected "str"  [arg-type]
        return await service.get_tenant_branding(current_user.tenant_id)
                                                 ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/branding_router.py: note: In function "update_tenant_branding":
src/dotmac/platform/tenant/branding_router.py:89:49: error: Argument 1 to
"update_tenant_branding" of "TenantService" has incompatible type "str | None";
expected "str"  [arg-type]
        return await service.update_tenant_branding(current_user.tenant_id...
                                                    ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/analytics_router.py: note: In function "get_platform_analytics_summary":
src/dotmac/platform/platform_admin/analytics_router.py:93:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def get_platform_analytics_summary(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:93:1: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
    async def get_platform_analytics_summary(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:110:9: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
            from dotmac.platform.auth.models import User
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/analytics_router.py: note: In function "get_tenant_activity_summary":
src/dotmac/platform/platform_admin/analytics_router.py:165:1: error: Function
is missing a return type annotation  [no-untyped-def]
    async def get_tenant_activity_summary(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:165:1: error: Function
is missing a type annotation for one or more arguments  [no-untyped-def]
    async def get_tenant_activity_summary(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:180:9: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
            from dotmac.platform.auth.models import User
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/analytics_router.py:232:25: error: "str" has
no attribute "HTTP_500_INTERNAL_SERVER_ERROR"  [attr-defined]
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/analytics_router.py: note: In function "aggregate_metric_across_tenants":
src/dotmac/platform/platform_admin/analytics_router.py:243:1: error: Function
is missing a return type annotation  [no-untyped-def]
    async def aggregate_metric_across_tenants(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:243:1: error: Function
is missing a type annotation for one or more arguments  [no-untyped-def]
    async def aggregate_metric_across_tenants(
    ^
src/dotmac/platform/platform_admin/analytics_router.py:268:13: error: Module
"dotmac.platform.auth.models" has no attribute "User"  [attr-defined]
                from dotmac.platform.auth.models import User
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/platform_admin/analytics_router.py:289:33: error: Argument
1 to "float" has incompatible type "Callable[[Any], int]"; expected
"str | Buffer | SupportsFloat | SupportsIndex"  [arg-type]
                        value=float(row.count),
                                    ^~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py: note: In function "list_managed_tenants":
src/dotmac/platform/partner_management/partner_multitenant_router.py:67:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:67:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py: note: In function "get_consolidated_billing_summary":
src/dotmac/platform/partner_management/partner_multitenant_router.py:269:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:269:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py: note: In function "list_invoices":
src/dotmac/platform/partner_management/partner_multitenant_router.py:319:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:319:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:326:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:326:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py: note: In function "list_tickets":
src/dotmac/platform/partner_management/partner_multitenant_router.py:431:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:431:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:438:25: error:
Item "str" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/partner_management/partner_multitenant_router.py:438:25: error:
Item "None" of "str | None" has no attribute "HTTP_403_FORBIDDEN"  [union-attr]
                status_code=status.HTTP_403_FORBIDDEN,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "list_notifications":
src/dotmac/platform/notifications/router.py:57:19: error: Argument "tenant_id"
to "get_user_notifications" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
            tenant_id=current_user.tenant_id,
                      ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py:66:61: error: Argument "tenant_id"
to "get_unread_count" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
    ...count = await service.get_unread_count(tenant_id=current_user.tenant_i...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "get_unread_count":
src/dotmac/platform/notifications/router.py:84:19: error: Argument "tenant_id"
to "get_unread_count" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
            tenant_id=current_user.tenant_id, user_id=ensure_uuid(current_...
                      ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "create_notification":
src/dotmac/platform/notifications/router.py:107:23: error: Argument "tenant_id"
to "create_notification" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
                tenant_id=current_user.tenant_id,
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "create_notification_from_template":
src/dotmac/platform/notifications/router.py:147:23: error: Argument "tenant_id"
to "create_from_template" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
                tenant_id=current_user.tenant_id,
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "mark_notification_as_read":
src/dotmac/platform/notifications/router.py:175:23: error: Argument "tenant_id"
to "mark_as_read" of "NotificationService" has incompatible type "str | None";
expected "str"  [arg-type]
                tenant_id=current_user.tenant_id,
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "mark_all_as_read":
src/dotmac/platform/notifications/router.py:197:23: error: Argument "tenant_id"
to "mark_all_as_read" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
                tenant_id=current_user.tenant_id, user_id=ensure_uuid(curr...
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "archive_notification":
src/dotmac/platform/notifications/router.py:218:23: error: Argument "tenant_id"
to "archive_notification" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
                tenant_id=current_user.tenant_id,
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "get_notification_preferences":
src/dotmac/platform/notifications/router.py:240:19: error: Argument "tenant_id"
to "get_user_preferences" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
            tenant_id=current_user.tenant_id, user_id=ensure_uuid(current_...
                      ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "update_notification_preferences":
src/dotmac/platform/notifications/router.py:266:23: error: Argument "tenant_id"
to "update_user_preferences" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
                tenant_id=current_user.tenant_id,
                          ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py: note: In function "get_notification_stats":
src/dotmac/platform/notifications/router.py:306:19: error: Argument "tenant_id"
to "get_user_notifications" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
            tenant_id=current_user.tenant_id,
                      ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/notifications/router.py:314:19: error: Argument "tenant_id"
to "get_unread_count" of "NotificationService" has incompatible type
"str | None"; expected "str"  [arg-type]
            tenant_id=current_user.tenant_id, user_id=user_uuid
                      ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py: note: In function "_build_tenant_response":
src/dotmac/platform/tenant/router.py:108:5: error: Property "is_trial" defined
in "Tenant" is read-only  [misc]
        response.is_trial = getattr(tenant, "is_trial", response.is_trial)
        ^~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py:110:5: error: Property "trial_expired"
defined in "Tenant" is read-only  [misc]
        response.trial_expired = getattr(tenant, "trial_expired", response...
        ^~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py:111:5: error: Property
"has_exceeded_user_limit" defined in "Tenant" is read-only  [misc]
        response.has_exceeded_user_limit = getattr(
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py:114:5: error: Property
"has_exceeded_api_limit" defined in "Tenant" is read-only  [misc]
        response.has_exceeded_api_limit = getattr(
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py:117:5: error: Property
"has_exceeded_storage_limit" defined in "Tenant" is read-only  [misc]
        response.has_exceeded_storage_limit = getattr(
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/tenant/router.py: note: At top level:
src/dotmac/platform/tenant/router.py:184:1: error: Name
"_build_tenant_response" already defined on line 97  [no-redef]
    def _build_tenant_response(
    ^
src/dotmac/platform/graphql/queries/network_profile.py: note: In member "upsert_network_profile" of class "NetworkProfileMutations":
src/dotmac/platform/graphql/queries/network_profile.py:257:41: error: Argument
1 to "_to_network_profile_type" has incompatible type "NetworkProfileResponse";
expected "SubscriberNetworkProfile"  [arg-type]
            return _to_network_profile_type(db_profile)
                                            ^~~~~~~~~~
src/dotmac/platform/graphql/queries/ip_management.py: note: In member "tenant_ip_stats" of class "IPManagementQueries":
src/dotmac/platform/graphql/queries/ip_management.py:357:49: error:
"type[IPPoolType]" has no attribute "PUBLIC_STATIC"  [attr-defined]
                        (IPPoolModel.pool_type.in_([IPPoolType.PUBLIC_STAT...
                                                    ^~~~~~~~~~~~~~~~~~~~~~~~
src/dotmac/platform/graphql/queries/ip_management.py:357:75: error:
"type[IPPoolType]" has no attribute "PRIVATE_STATIC"  [attr-defined]
    ...olModel.pool_type.in_([IPPoolType.PUBLIC_STATIC, IPPoolType.PRIVATE_ST...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
src/dotmac/platform/graphql/queries/ip_management.py: note: In member "reserve_ip" of class "IPManagementMutations":
src/dotmac/platform/graphql/queries/ip_management.py:522:22: error: "Context"
has no attribute "user"  [attr-defined]
            user_email = context.user.email if context.user else "unknown"
                         ^~~~~~~~~~~~
src/dotmac/platform/graphql/queries/ip_management.py: note: In member "auto_assign_ip" of class "IPManagementMutations":
src/dotmac/platform/graphql/queries/ip_management.py:580:22: error: "Context"
has no attribute "user"  [attr-defined]
            user_email = context.user.email if context.user else "unknown"
                         ^~~~~~~~~~~~
src/dotmac/platform/graphql/queries/ip_management.py: note: In member "release_ip" of class "IPManagementMutations":
src/dotmac/platform/graphql/queries/ip_management.py:628:22: error: "Context"
has no attribute "user"  [attr-defined]
            user_email = context.user.email if context.user else "unknown"
                         ^~~~~~~~~~~~
Found 485 errors in 51 files (checked 722 source files)
